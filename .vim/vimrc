" .vimrc
" 
set nocompatible
scriptencoding utf-8
set encoding=utf-8
set noerrorbells
"set mouse=a " Enable mouse for scrolling and resizing
set nofoldenable " Disable folding by default
set hidden

" TAB
set tabstop=4
set noexpandtab
"set autoindent		" Auto-indent new lines
set noautoindent
set shiftwidth=4	" Number of auto-indent spaces
set smartindent		" Enable smart-indent
set smarttab		" Enable smart-tabs
set softtabstop=4	" Number of spaces per Tab
set wildmenu
"set wildmode=longest,list " tcsh style
set wildignorecase

" it is not a dummy terminal
"set notimeout nottimeout timeoutlen=0 ttimeoutlen=-1
set notimeout ttimeout ttimeoutlen=50 " fandom

" General
set backspace=indent,eol,start	" Backspace behaviour
set number			" Show line numbers
"set no wrap		" Wrap lines
set textwidth=80	" Line wrap (number of cols)
set nospell
set spelllang=en,el	" Enable spell-checking

set hlsearch		" Highlight all search results
set smartcase		" Enable smart-case search
set incsearch		" Searches for strings incrementally

set more

set ruler			" Show row and column ruler information
set showmatch
set matchtime=1

" root of secondary directories
if exists('$BACKUPDIR')
	let g:backuproot = $BACKUPDIR
else
	let g:backuproot = $HOME."/.backup"
endif

" backup & undo
if !isdirectory(g:backuproot."/text")
	call mkdir(g:backuproot."/text", "p", 0700)
endif
set backup
set backupdir=g:backuproot."/text"
set noswapfile

if !isdirectory(g:backuproot."/vim-undo")
	call mkdir(g:backuproot."/vim-undo", "p", 0700)
endif
set undodir=g:backuproot."/vim-undo"
set undolevels=1000	" Number of undo levels

" plugins
syntax on
filetype on
filetype plugin on

" -----------------------------------
" extra packages

runtime! ftplugin/man.vim
packadd! vim-quickui
packadd! lightline.vim

let g:ranger_replace_netrw = 1
let g:ranger_map_keys = 0
set shell=bash
if has("nvim")
	packadd! bclose.vim
endif
packadd! ranger.vim

"packadd! vim-airline
"let g:airline#extensions#obsession#enabled = 1
"packadd! fileselect " VIM version issues
"packadd! bufselect " modified
"packadd! taglist

"packadd! vim-commentor
"command! CommentBlock	:call commentor#CommentToggle(visualmode(), 1)
" on select mode press gc to (un)comment block

" -----------------------------------
" colors
"let g:cc_schemes = ["cbrief", "turbo", "onedark"]
if has("gui_running")
	" note: invoke gvim with specified size
	"	alias g 'gvim -geom 112x30'
	" or use set lines, set columns in ~/.vimrc
	colorscheme onedark
	if hostname() == "quicksand64"
		set gfn=Iosevka\ Fixed\ Semi-Bold\ Expanded\ 14
	elseif hostname() == "void-t440s"
		set gfn=Iosevka\ Fixed\ Semi-Bold\ 11
	else
		set gfn=Iosevka\ Fixed\ Semi-Bold\ 10
	endif
else
	if has("nvim")
		set guifont="Cousine Bold:h14"
	endif
	colorscheme cbrief
endif

" -----------------------------------

" fix ALT keys mapping
source ~/.vim/altkeys.vim

" load default BRIEF emulation
source ~/.vim/brief.vim

" colors
source ~/.vim/ccolors.vim

" my buflist
source ~/.vim/cbuflist.vim

" my BRIEF version
source ~/.vim/cbrief.vim

" -----------------------------------
" Display who change it:
" :verbose set showmode?
"
set noshowmode
set noshowcmd
set laststatus=2
set lazyredraw
set backspace=indent,eol,start
" -----------------------------------

" Markdown files
au BufRead,BufNewFile *.md setlocal filetype=markdown spell
" Treat all .tex files as latex
au BufRead,BufNewFile *.tex setlocal filetype=tex spell
" LaTeX class files
au BufRead,BufNewFile *.cls setlocal filetype=tex spell
" SQLite-specific file
au BufRead,BufNewFile *.sqlite setlocal filetype=sql
" Treat all .h files as C (not cpp)
au BufRead,BufNewFile *.h setlocal filetype=c
" set spell on text files
au BufRead,BufNewFile *.txt setlocal filetype=text spell
" quickfix
au FileType qf setlocal nonumber

" enable spell on simple docs
autocmd FileType markdown,text,pandoc,tex setlocal spell spelllang=en,el

" fix lost highlight bug!
autocmd BufEnter * :syntax sync fromstart

"set digraph
"digraph kk 983 " greek ampersand

" add to c
"abb #i #include

" reformat help
"augroup help
"	autocmd!
"	autocmd Filetype help
"		\ set modifiable noreadonly textwidth=120
"		\| normal! gqG
"augroup end
						
" ----------------------------------------------------------------------
" stuff to ignore when tab completing
set wildignore=*.o
set wildignore+=*.obj,*~,*.exe,*.a,*.pdb,*.lib 
set wildignore+=*.so,*.dll,*.swp,*.egg,*.jar,*.class,*.pyc,*.pyo,*.bin,*.dex
set wildignore+=*.zip,*.7z,*.rar,*.gz,*.tar,*.gzip,*.bz2,*.tgz,*.xz
set wildignore+=*DS_Store*,*.ipch,*.gem
set wildignore+=*.png,*.jpg,*.gif,*.bmp,*.tga,*.pcx,*.ppm,*.img,*.iso
set wildignore+=*.so,*.swp,*.zip,*/.Trash/**,*.pdf,*.dmg,*/.rbenv/**
set wildignore+=*/.nx/**,*.app,*.git,.git
set wildignore+=*.wav,*.mp3,*.ogg,*.pcm
set wildignore+=*.mht,*.suo,*.sdf,*.jnlp
set wildignore+=*.chm,*.epub,*.pdf,*.mobi,*.ttf
set wildignore+=*.mp4,*.avi,*.flv,*.mov,*.mkv,*.swf,*.swc
set wildignore+=*.ppt,*.pptx,*.docx,*.xlt,*.xls,*.xlsx,*.odt,*.wps
set wildignore+=*.msi,*.crx,*.deb,*.vfd,*.apk,*.ipa,*.bin,*.msu
set wildignore+=*.gba,*.sfc,*.078,*.nds,*.smd,*.smc
set wildignore+=*.linux2,*.win32,*.darwin,*.freebsd,*.linux,*.android

" === Define Commands
" Command Interface: 
" com! -bar -nargs=0 SWP	call F()
" com! -bar -nargs=? RWP	call F(<args>)
" com! -bar -nargs=1 SM		call F(<q-args>)
" 
" Start nnn in the current file's directory
"inoremap <C-E> <C-O>:NnnPicker %:p:h<CR>

" redraw
"nnoremap <C-L> :nohl<CR><C-L>
"inoremap <C-L> <C-O>:nohl<CR><C-L>

" my session manager
source ~/.vim/csession.vim


